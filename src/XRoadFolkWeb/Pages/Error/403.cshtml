@page
@using XRoadFolkWeb.Shared
@inject Microsoft.Extensions.Localization.IStringLocalizer<SharedResource> SR
@model XRoadFolkWeb.Pages.Error.ForbiddenModel
@{
    Layout = "~/Pages/Shared/_Layout.cshtml";
    ViewData["Title"] = SR["AccessDeniedTitle"].ResourceNotFound ? "Access denied" : SR["AccessDeniedTitle"].Value;
    string title = ViewData["Title"]?.ToString() ?? "Access denied";
    string msgLead = SR["AccessDeniedLead"].ResourceNotFound ? "You are authenticated but do not have permission to use this application." : SR["AccessDeniedLead"].Value;
    string msgAsk = SR["AccessDeniedAsk"].ResourceNotFound ? "Please contact an application administrator to request access." : SR["AccessDeniedAsk"].Value;
    string userLabel = SR["UserLabel"].ResourceNotFound ? "User" : SR["UserLabel"].Value;
    string traceLabel = SR["TraceId"].ResourceNotFound ? "Trace Id" : SR["TraceId"].Value;
    string timeLabel = SR["TimeUtc"].ResourceNotFound ? "Time (UTC)" : SR["TimeUtc"].Value;
    string homeText = SR["Home"].ResourceNotFound ? "Home" : SR["Home"].Value;
    string backText = SR["Back"].ResourceNotFound ? "Back" : SR["Back"].Value;
}
<section class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-sm border-danger-subtle">
        <div class="card-header bg-danger-subtle text-danger-emphasis">
          <h1 class="h4 mb-0"><i class="bi bi-shield-lock-fill me-2" aria-hidden="true"></i>@title</h1>
        </div>
        <div class="card-body">
          <p class="lead mb-3">@msgLead</p>
          <p class="mb-3">@msgAsk</p>
          <ul class="small mb-4 list-unstyled">
            <li><strong>@userLabel:</strong> @User?.Identity?.Name</li>
            <li><strong>@traceLabel:</strong> @HttpContext.TraceIdentifier</li>
            <li><strong>@timeLabel:</strong> @DateTime.UtcNow.ToString("u")</li>
          </ul>
          <a href="/" class="btn btn-outline-primary"><i class="bi bi-house-door me-1" aria-hidden="true"></i>@homeText</a>
          <button type="button" class="btn btn-outline-secondary ms-2" onclick="history.back()">@backText</button>
        </div>
      </div>
    </div>
  </div>
</section>
