/* Shared styles for GPIV viewers */
.gpiv-card { position: relative; }
.gpiv-toolbar { position: sticky; top: -1px; z-index: 2; background: var(--bs-body-bg); padding-top: .25rem; }
.gpiv-card.gpiv-fullscreen { position: fixed; inset: 0; z-index: 1050; margin: 0; border-radius: 0; background: var(--bs-body-bg); height: auto !important; }
.gpiv-card .card-body { display: flex; flex-direction: column; min-height: 0; }

/* Make tab content fill remaining height and allow inner panes to layout */
.gpiv-card #gpiv-tabs-content { display: flex; flex-direction: column; flex: 1 1 auto; min-height: 0; }
.gpiv-card #gpiv-tab-summary { display: flex; flex-direction: column; flex: 1 1 auto; min-height: 0; }

.gpiv-card .gpiv-viewport,
#gpiv-xml-summary { flex: 1 1 auto; min-height: 0; overflow: auto; -webkit-overflow-scrolling: touch; }

.gpiv-card.gpiv-fullscreen .card-body { height: 100vh; height: 100dvh; }
.gpiv-card.gpiv-fullscreen .gpiv-viewport { max-height: none; }

/* PersonDetails fullscreen fallback (CSS class toggled when Fullscreen API is unavailable or denied) */
#person-details-section.pd-fullscreen { position: fixed; inset: 0; z-index: 1060; margin: 0; border-radius: 0; background: var(--bs-body-bg); }
#person-details-section.pd-fullscreen .card-body { display: flex; flex-direction: column; min-height: 0; height: 100vh; height: 100dvh; }
#person-details-section.pd-fullscreen #pd-tabs-content { flex: 1 1 auto; min-height: 0; overflow: auto; -webkit-overflow-scrolling: touch; }

/* PersonDetails API fullscreen (pseudo-class) */
#person-details-section:fullscreen { z-index: 1060; background: var(--bs-body-bg); }
#person-details-section:fullscreen .card-body { display: flex; flex-direction: column; min-height: 0; height: 100vh; height: 100dvh; }
#person-details-section:fullscreen #pd-tabs-content { flex: 1 1 auto; min-height: 0; overflow: auto; -webkit-overflow-scrolling: touch; }
/* Safari/WebKit variant */
#person-details-section:-webkit-full-screen { z-index: 1060; background: var(--bs-body-bg); }
#person-details-section:-webkit-full-screen .card-body { display: flex; flex-direction: column; min-height: 0; height: 100vh; height: 100dvh; }
#person-details-section:-webkit-full-screen #pd-tabs-content { flex: 1 1 auto; min-height: 0; overflow: auto; -webkit-overflow-scrolling: touch; }

.gpiv-drop { display: none; position: absolute; inset: 0; z-index: 3; background: rgba(0,0,0,.05); border: 2px dashed var(--bs-secondary); align-items: center; justify-content: center; text-align: center; padding: 2rem; border-radius: .375rem; }
.gpiv-drop .msg { font-size: .95rem; color: var(--bs-secondary); }
@keyframes gpivFlash { 0% { background: rgba(255, 243, 205, .9); } 100% { background: transparent; } }
.gpiv-highlight { animation: gpivFlash 1.5s ease-out 1; }

/* SUMMARY: match person-details accordion exactly */
#gpiv-xml-summary .accordion-button { padding: .5rem .75rem; font-weight: 600; }
#gpiv-xml-summary .accordion-item + .accordion-item { border-top: 1px solid var(--bs-border-color); }
#gpiv-xml-summary .accordion-body { padding: 0; }

/* Table readability tweaks to match person-details */
#gpiv-xml-summary .table { margin: 0; }
#gpiv-xml-summary .table th { width: 35%; background: var(--bs-tertiary-bg, var(--bs-secondary-bg-subtle)); color: var(--bs-secondary-color); }
#gpiv-xml-summary .table th, #gpiv-xml-summary .table td { vertical-align: top; word-break: break-word; }
#gpiv-xml-summary .table tbody tr:hover th, #gpiv-xml-summary .table tbody tr:hover td { background: var(--bs-secondary-bg-subtle); }

/* Person header inside the scrolling summary viewport (non-sticky) */
#gpiv-xml-summary .gpiv-person { position: static; }
#gpiv-xml-summary .gpiv-person-header { position: static; background: transparent; border-bottom: none; padding-block: .25rem; }

/* Add active card state like person details focus */
#gpiv-xml-summary .gpiv-active-card { outline: 2px solid var(--bs-primary); outline-offset: 2px; }

/* Tabs */
.gpiv-tab-actions { gap: .5rem; }
.gpiv-pre { white-space: pre; overflow: auto; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: .85rem; padding: .75rem; border-radius: .25rem; background: var(--bs-tertiary-bg, #f8f9fa); }
@media (prefers-color-scheme: dark) { .gpiv-pre { background: rgba(255,255,255,.05); color: inherit; } }
